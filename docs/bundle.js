"use strict";(()=>{var j,v,mt,$t,N,it,ft,dt,pt,Q,J,K,Gt,F={},ht=[],Vt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,W=Array.isArray;function L(e,t){for(var n in t)e[n]=t[n];return e}function Z(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Yt(e,t,n){var o,r,a,_={};for(a in t)a=="key"?o=t[a]:a=="ref"?r=t[a]:_[a]=t[a];if(arguments.length>2&&(_.children=arguments.length>3?j.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)_[a]===void 0&&(_[a]=e.defaultProps[a]);return G(e,_,o,r,null)}function G(e,t,n,o,r){var a={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++mt,__i:-1,__u:0};return r==null&&v.vnode!=null&&v.vnode(a),a}function M(e){return e.children}function V(e,t){this.props=e,this.context=t}function D(e,t){if(t==null)return e.__?D(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?D(e):null}function gt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return gt(e)}}function ct(e){(!e.__d&&(e.__d=!0)&&N.push(e)&&!Y.__r++||it!=v.debounceRendering)&&((it=v.debounceRendering)||ft)(Y)}function Y(){for(var e,t,n,o,r,a,_,c=1;N.length;)N.length>c&&N.sort(dt),e=N.shift(),c=N.length,e.__d&&(n=void 0,o=void 0,r=(o=(t=e).__v).__e,a=[],_=[],t.__P&&((n=L({},o)).__v=o.__v+1,v.vnode&&v.vnode(n),tt(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,a,r??D(o),!!(32&o.__u),_),n.__v=o.__v,n.__.__k[n.__i]=n,bt(a,n,_),o.__e=o.__=null,n.__e!=r&&gt(n)));Y.__r=0}function yt(e,t,n,o,r,a,_,c,l,i,u){var s,p,d,b,x,S,h,y=o&&o.__k||ht,R=t.length;for(l=jt(n,t,y,l,R),s=0;s<R;s++)(d=n.__k[s])!=null&&(p=d.__i==-1?F:y[d.__i]||F,d.__i=s,S=tt(e,d,p,r,a,_,c,l,i,u),b=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&et(p.ref,null,d),u.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),(h=!!(4&d.__u))||p.__k===d.__k?l=vt(d,l,e,h):typeof d.type=="function"&&S!==void 0?l=S:b&&(l=b.nextSibling),d.__u&=-7);return n.__e=x,l}function jt(e,t,n,o,r){var a,_,c,l,i,u=n.length,s=u,p=0;for(e.__k=new Array(r),a=0;a<r;a++)(_=t[a])!=null&&typeof _!="boolean"&&typeof _!="function"?(typeof _=="string"||typeof _=="number"||typeof _=="bigint"||_.constructor==String?_=e.__k[a]=G(null,_,null,null,null):W(_)?_=e.__k[a]=G(M,{children:_},null,null,null):_.constructor===void 0&&_.__b>0?_=e.__k[a]=G(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):e.__k[a]=_,l=a+p,_.__=e,_.__b=e.__b+1,c=null,(i=_.__i=Wt(_,n,l,s))!=-1&&(s--,(c=n[i])&&(c.__u|=2)),c==null||c.__v==null?(i==-1&&(r>u?p--:r<u&&p++),typeof _.type!="function"&&(_.__u|=4)):i!=l&&(i==l-1?p--:i==l+1?p++:(i>l?p--:p++,_.__u|=4))):e.__k[a]=null;if(s)for(a=0;a<u;a++)(c=n[a])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=D(c)),St(c,c));return o}function vt(e,t,n,o){var r,a;if(typeof e.type=="function"){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=vt(r[a],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=D(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Wt(e,t,n,o){var r,a,_,c=e.key,l=e.type,i=t[n],u=i!=null&&(2&i.__u)==0;if(i===null&&c==null||u&&c==i.key&&l==i.type)return n;if(o>(u?1:0)){for(r=n-1,a=n+1;r>=0||a<t.length;)if((i=t[_=r>=0?r--:a++])!=null&&(2&i.__u)==0&&c==i.key&&l==i.type)return _}return-1}function lt(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Vt.test(t)?n:n+"px"}function $(e,t,n,o,r){var a,_;t:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||lt(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||lt(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(pt,"$1")),_=t.toLowerCase(),t=_ in e||t=="onFocusOut"||t=="onFocusIn"?_.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?o?n.u=o.u:(n.u=Q,e.addEventListener(t,a?K:J,a)):e.removeEventListener(t,a?K:J,a);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ut(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Q++;else if(t.t<n.u)return;return n(v.event?v.event(t):t)}}}function tt(e,t,n,o,r,a,_,c,l,i){var u,s,p,d,b,x,S,h,y,R,f,T,g,A,C,I,U,w=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(l=!!(32&n.__u),a=[c=t.__e=n.__e]),(u=v.__b)&&u(t);t:if(typeof w=="function")try{if(h=t.props,y="prototype"in w&&w.prototype.render,R=(u=w.contextType)&&o[u.__c],f=u?R?R.props.value:u.__:o,n.__c?S=(s=t.__c=n.__c).__=s.__E:(y?t.__c=s=new w(h,f):(t.__c=s=new V(h,f),s.constructor=w,s.render=qt),R&&R.sub(s),s.state||(s.state={}),s.__n=o,p=s.__d=!0,s.__h=[],s._sb=[]),y&&s.__s==null&&(s.__s=s.state),y&&w.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=L({},s.__s)),L(s.__s,w.getDerivedStateFromProps(h,s.__s))),d=s.props,b=s.state,s.__v=t,p)y&&w.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),y&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(y&&w.getDerivedStateFromProps==null&&h!==d&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(h,f),t.__v==n.__v||!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(h,s.__s,f)===!1){for(t.__v!=n.__v&&(s.props=h,s.state=s.__s,s.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(O){O&&(O.__=t)}),T=0;T<s._sb.length;T++)s.__h.push(s._sb[T]);s._sb=[],s.__h.length&&_.push(s);break t}s.componentWillUpdate!=null&&s.componentWillUpdate(h,s.__s,f),y&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(d,b,x)})}if(s.context=f,s.props=h,s.__P=e,s.__e=!1,g=v.__r,A=0,y){for(s.state=s.__s,s.__d=!1,g&&g(t),u=s.render(s.props,s.state,s.context),C=0;C<s._sb.length;C++)s.__h.push(s._sb[C]);s._sb=[]}else do s.__d=!1,g&&g(t),u=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++A<25);s.state=s.__s,s.getChildContext!=null&&(o=L(L({},o),s.getChildContext())),y&&!p&&s.getSnapshotBeforeUpdate!=null&&(x=s.getSnapshotBeforeUpdate(d,b)),I=u,u!=null&&u.type===M&&u.key==null&&(I=Ct(u.props.children)),c=yt(e,W(I)?I:[I],t,n,o,r,a,_,c,l,i),s.base=t.__e,t.__u&=-161,s.__h.length&&_.push(s),S&&(s.__E=s.__=null)}catch(O){if(t.__v=null,l||a!=null)if(O.then){for(t.__u|=l?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else{for(U=a.length;U--;)Z(a[U]);X(t)}else t.__e=n.__e,t.__k=n.__k,O.then||X(t);v.__e(O,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=Bt(n.__e,t,n,o,r,a,_,l,i);return(u=v.diffed)&&u(t),128&t.__u?void 0:c}function X(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(X)}function bt(e,t,n){for(var o=0;o<n.length;o++)et(n[o],n[++o],n[++o]);v.__c&&v.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(a){a.call(r)})}catch(a){v.__e(a,r.__v)}})}function Ct(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:W(e)?e.map(Ct):L({},e)}function Bt(e,t,n,o,r,a,_,c,l){var i,u,s,p,d,b,x,S=n.props||F,h=t.props,y=t.type;if(y=="svg"?r="http://www.w3.org/2000/svg":y=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),a!=null){for(i=0;i<a.length;i++)if((d=a[i])&&"setAttribute"in d==!!y&&(y?d.localName==y:d.nodeType==3)){e=d,a[i]=null;break}}if(e==null){if(y==null)return document.createTextNode(h);e=document.createElementNS(r,y,h.is&&h),c&&(v.__m&&v.__m(t,a),c=!1),a=null}if(y==null)S===h||c&&e.data==h||(e.data=h);else{if(a=a&&j.call(e.childNodes),!c&&a!=null)for(S={},i=0;i<e.attributes.length;i++)S[(d=e.attributes[i]).name]=d.value;for(i in S)if(d=S[i],i!="children"){if(i=="dangerouslySetInnerHTML")s=d;else if(!(i in h)){if(i=="value"&&"defaultValue"in h||i=="checked"&&"defaultChecked"in h)continue;$(e,i,null,d,r)}}for(i in h)d=h[i],i=="children"?p=d:i=="dangerouslySetInnerHTML"?u=d:i=="value"?b=d:i=="checked"?x=d:c&&typeof d!="function"||S[i]===d||$(e,i,d,S[i],r);if(u)c||s&&(u.__html==s.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(s&&(e.innerHTML=""),yt(t.type=="template"?e.content:e,W(p)?p:[p],t,n,o,y=="foreignObject"?"http://www.w3.org/1999/xhtml":r,a,_,a?a[0]:n.__k&&D(n,0),c,l),a!=null)for(i=a.length;i--;)Z(a[i]);c||(i="value",y=="progress"&&b==null?e.removeAttribute("value"):b!=null&&(b!==e[i]||y=="progress"&&!b||y=="option"&&b!=S[i])&&$(e,i,b,S[i],r),i="checked",x!=null&&x!=e[i]&&$(e,i,x,S[i],r))}return e}function et(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){v.__e(r,n)}}function St(e,t,n){var o,r;if(v.unmount&&v.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||et(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(a){v.__e(a,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&St(o[r],t,n||typeof e.type!="function");n||Z(e.__e),e.__c=e.__=e.__e=void 0}function qt(e,t,n){return this.constructor(e,n)}function Tt(e,t,n){var o,r,a,_;t==document&&(t=document.documentElement),v.__&&v.__(e,t),r=(o=typeof n=="function")?null:n&&n.__k||t.__k,a=[],_=[],tt(t,e=(!o&&n||t).__k=Yt(M,null,[e]),r||F,F,t.namespaceURI,!o&&n?[n]:r?null:t.firstChild?j.call(t.childNodes):null,a,!o&&n?n:r?r.__e:t.firstChild,o,_),bt(a,e,_)}j=ht.slice,v={__e:function(e,t,n,o){for(var r,a,_;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&a.getDerivedStateFromError!=null&&(r.setState(a.getDerivedStateFromError(e)),_=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),_=r.__d),_)return r.__E=r}catch(c){e=c}throw e}},mt=0,$t=function(e){return e!=null&&e.constructor===void 0},V.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=L({},this.state),typeof e=="function"&&(e=e(L({},n),this.props)),e&&L(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ct(this))},V.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ct(this))},V.prototype.render=M,N=[],ft=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,dt=function(e,t){return e.__v.__b-t.__v.__b},Y.__r=0,pt=/(PointerCapture)$|Capture$/i,Q=0,J=ut(!1),K=ut(!0),Gt=0;var q,E,nt,Et,ot=0,Lt=[],k=v,kt=k.__b,At=k.__r,xt=k.diffed,wt=k.__c,Rt=k.unmount,It=k.__;function Ht(e,t){k.__h&&k.__h(E,e,ot||t),ot=0;var n=E.__H||(E.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function P(e){return ot=1,zt(Nt,e)}function zt(e,t,n){var o=Ht(q++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):Nt(void 0,t),function(c){var l=o.__N?o.__N[0]:o.__[0],i=o.t(l,c);l!==i&&(o.__N=[i,o.__[1]],o.__c.setState({}))}],o.__c=E,!E.__f)){var r=function(c,l,i){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!a||a.call(this,c,l,i);var s=o.__c.props!==c;return u.forEach(function(p){if(p.__N){var d=p.__[0];p.__=p.__N,p.__N=void 0,d!==p.__[0]&&(s=!0)}}),a&&a.call(this,c,l,i)||s};E.__f=!0;var a=E.shouldComponentUpdate,_=E.componentWillUpdate;E.componentWillUpdate=function(c,l,i){if(this.__e){var u=a;a=void 0,r(c,l,i),a=u}_&&_.call(this,c,l,i)},E.shouldComponentUpdate=r}return o.__N||o.__}function Mt(e,t){var n=Ht(q++,3);!k.__s&&Xt(n.__H,t)&&(n.__=e,n.u=t,E.__H.__h.push(n))}function Jt(){for(var e;e=Lt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(B),e.__H.__h.forEach(rt),e.__H.__h=[]}catch(t){e.__H.__h=[],k.__e(t,e.__v)}}k.__b=function(e){E=null,kt&&kt(e)},k.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),It&&It(e,t)},k.__r=function(e){At&&At(e),q=0;var t=(E=e.__c).__H;t&&(nt===E?(t.__h=[],E.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(B),t.__h.forEach(rt),t.__h=[],q=0)),nt=E},k.diffed=function(e){xt&&xt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Lt.push(t)!==1&&Et===k.requestAnimationFrame||((Et=k.requestAnimationFrame)||Kt)(Jt)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),nt=E=null},k.__c=function(e,t){t.some(function(n){try{n.__h.forEach(B),n.__h=n.__h.filter(function(o){return!o.__||rt(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],k.__e(o,n.__v)}}),wt&&wt(e,t)},k.unmount=function(e){Rt&&Rt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{B(o)}catch(r){t=r}}),n.__H=void 0,t&&k.__e(t,n.__v))};var Ot=typeof requestAnimationFrame=="function";function Kt(e){var t,n=function(){clearTimeout(o),Ot&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);Ot&&(t=requestAnimationFrame(n))}function B(e){var t=E,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),E=t}function rt(e){var t=E;e.__c=e.__(),E=t}function Xt(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Nt(e,t){return typeof t=="function"?t(e):t}var Qt=0;function m(e,t,n,o,r,a){t||(t={});var _,c,l=t;if("ref"in l)for(c in l={},t)c=="ref"?_=t[c]:l[c]=t[c];var i={type:e,props:l,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Qt,__i:-1,__u:0,__source:r,__self:a};if(typeof e=="function"&&(_=e.defaultProps))for(c in _)l[c]===void 0&&(l[c]=_[c]);return v.vnode&&v.vnode(i),i}var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],at="csi-tsv-data",Zt={date:["date","transaction date","trans date","posted date","posting date","trans_date","txn date","txn_date"],merchant:["merchant","vendor","payee","description","merchant name","name","store"],category:["category","type","expense type","transaction type","trans type","spending category"],account:["account","account name","card","payment method","source","bank","credit card"],originalStatement:["original statement","statement","memo","original description","raw description","bank description"],notes:["notes","note","comments","comment","remarks","remark"],amount:["amount","total","sum","value","price","cost","transaction amount","trans amount"],tags:["tags","tag","labels","label"],owner:["owner","user","person","member","paid by","purchaser"],fixedCategory:["fixedcategory","fixed category","override category","corrected category","manual category"]};function te(e){let t=e.map(r=>r.toLowerCase().trim()),n={},o=new Set;for(let[r,a]of Object.entries(Zt)){if(r!=="fixedCategory"){let _=a.map(c=>`fixed${c}`).concat(a.map(c=>`fixed ${c}`));for(let c of _){let l=t.findIndex((i,u)=>!o.has(u)&&i===c);if(l!==-1){let i=`fixed${r.charAt(0).toUpperCase()+r.slice(1)}`;i in n||(n[i]=l,o.add(l))}}}for(let _ of a){let c=t.findIndex((l,i)=>!o.has(i)&&l===_);if(c!==-1){n[r]=c,o.add(c);break}}}return{date:n.date??-1,merchant:n.merchant??-1,category:n.category??-1,account:n.account??-1,originalStatement:n.originalStatement??-1,notes:n.notes??-1,amount:n.amount??-1,tags:n.tags??-1,owner:n.owner??-1,fixedCategory:n.fixedCategory??-1}}function ee(e){let t=e.trim(),n=t.match(/^(\d{4})[-/](\d{1,2})[-/](\d{1,2})$/);if(n)return{year:parseInt(n[1],10),month:parseInt(n[2],10),day:parseInt(n[3],10)};if(n=t.match(/^(\d{1,2})[-/](\d{1,2})[-/](\d{4})$/),n){let o=parseInt(n[1],10),r=parseInt(n[2],10),a=parseInt(n[3],10);return o>12&&r<=12?{year:a,month:r,day:o}:{year:a,month:o,day:r}}return null}function ne(e){let t=e.filter(o=>o<0).length,n=e.filter(o=>o>0).length;return t>n}function oe(){let e=["Groceries","Restaurants","Transportation","Entertainment","Utilities","Shopping","Healthcare","Travel"],t=["Platinum Card","Rewards Visa","Checking Account","Debit Card"],n=["Primary","Secondary","Shared"],o={Groceries:[{name:"Fresh Mart",statement:"FRESH MART #1234"},{name:"Green Valley Foods",statement:"GREEN VALLEY FOODS"},{name:"City Grocery",statement:"CITY GROCERY STORE"},{name:"Organic Market",statement:"ORGANIC MKT LLC"},{name:"Corner Store",statement:"CORNER STORE #567"}],Restaurants:[{name:"Bella Italia",statement:"BELLA ITALIA REST"},{name:"Golden Dragon",statement:"GOLDEN DRAGON #42"},{name:"Burger Joint",statement:"BURGER JOINT LLC"},{name:"Sushi Palace",statement:"SUSHI PALACE"},{name:"Taco Express",statement:"TACO EXPRESS #789"}],Transportation:[{name:"Metro Transit",statement:"METRO TRANSIT AUTH"},{name:"City Parking",statement:"CITY PARKING GARAGE"},{name:"Fuel Stop",statement:"FUEL STOP #321"},{name:"Rideshare Co",statement:"RIDESHARE CO"},{name:"Auto Service",statement:"AUTO SERVICE CTR"}],Entertainment:[{name:"Cinema Plus",statement:"CINEMA PLUS #55"},{name:"Streaming Service",statement:"STREAMING SVC"},{name:"Concert Hall",statement:"CONCERT HALL TIX"},{name:"Bowling Alley",statement:"BOWLING ALLEY"},{name:"Game Store",statement:"GAME STORE #12"}],Utilities:[{name:"Electric Company",statement:"ELECTRIC CO UTIL"},{name:"Water Services",statement:"WATER SERVICES"},{name:"Internet Provider",statement:"INTERNET PROV LLC"},{name:"Gas Utility",statement:"GAS UTILITY CO"},{name:"Phone Service",statement:"PHONE SVC #999"}],Shopping:[{name:"Department Store",statement:"DEPT STORE #100"},{name:"Electronics Hub",statement:"ELECTRONICS HUB"},{name:"Fashion Outlet",statement:"FASHION OUTLET"},{name:"Home Goods",statement:"HOME GOODS STORE"},{name:"Book Emporium",statement:"BOOK EMPORIUM"}],Healthcare:[{name:"City Pharmacy",statement:"CITY PHARMACY #77"},{name:"Medical Clinic",statement:"MEDICAL CLINIC"},{name:"Vision Center",statement:"VISION CENTER"},{name:"Dental Office",statement:"DENTAL OFFICE LLC"},{name:"Health Mart",statement:"HEALTH MART #33"}],Travel:[{name:"Airline Express",statement:"AIRLINE EXPRESS"},{name:"Hotel Suites",statement:"HOTEL SUITES INC"},{name:"Car Rental Co",statement:"CAR RENTAL CO"},{name:"Travel Agency",statement:"TRAVEL AGENCY LLC"},{name:"Resort Stay",statement:"RESORT STAY #88"}]},r={Groceries:[25,150],Restaurants:[15,80],Transportation:[10,60],Entertainment:[12,50],Utilities:[40,200],Shopping:[20,200],Healthcare:[15,100],Travel:[100,500]},a=12345,_=()=>(a=a*1103515245+12345&2147483647,a/2147483647),c=(u,s)=>Math.floor(_()*(s-u+1))+u,l=u=>u[Math.floor(_()*u.length)],i=[];i.push("Date	Merchant	Category	Account	Original Statement	Notes	Amount	Tags	Owner");for(let u=1;u<=12;u++)for(let s of e){let p=c(3,6),d=o[s]??[],[b,x]=r[s]??[20,100];for(let S=0;S<p;S++){let h=c(1,28),y=`2025-${String(u).padStart(2,"0")}-${String(h).padStart(2,"0")}`,R=l(d),f=l(t),T=l(n),g=-(c(b*100,x*100)/100);i.push(`${y}	${R.name}	${s}	${f}	${R.statement}		${g.toFixed(2)}		${T}`)}}return i.join(`
`)}function Pt(e){let t=e.trim().split(`
`);if(t.length<2)return[];let n=t[0];if(!n)return[];let o=n.split("	"),r=te(o),a=[];for(let l=1;l<t.length;l++){let i=t[l];if(!i?.trim())continue;let u=i.split("	");if(r.amount>=0){let s=parseFloat(u[r.amount]??"0")||0;s!==0&&a.push(s)}}let _=ne(a),c=[];for(let l=1;l<t.length;l++){let i=t[l];if(!i?.trim())continue;let u=i.split("	"),s=b=>b>=0?u[b]??"":"",p=parseFloat(s(r.amount))||0,d=_?-p:p;c.push({date:s(r.date),merchant:s(r.merchant),category:s(r.category),account:s(r.account),originalStatement:s(r.originalStatement),notes:s(r.notes),amount:d,tags:s(r.tags),owner:s(r.owner),fixedCategory:s(r.fixedCategory)})}return c}function _t(e){let t=ee(e);return t?{year:t.year,month:t.month}:null}function st(e){let t=new Set;for(let n of e){let o=_t(n.date);o&&t.add(o.year)}return Array.from(t).sort((n,o)=>o-n)}function re(e,t){let n={};for(let o of e){let r=_t(o.date);if(!r||r.year!==t)continue;let a=o.fixedCategory||o.category||"Uncategorized";n[a]||(n[a]={});let _=n[a];_&&(_[r.month]=(_[r.month]??0)+o.amount)}return n}function H(e){let n=Math.abs(Math.round(e)).toLocaleString("en-US");return e<0?`-$${n}`:`$${n}`}function Dt(e){let t=Object.values(e).filter(c=>c!==0);if(t.length===0)return{total:0,mean:0,median:0};let n=t.reduce((c,l)=>c+l,0),o=n/t.length,r=[...t].sort((c,l)=>c-l),a=Math.floor(r.length/2),_=r.length%2!==0?r[a]??0:((r[a-1]??0)+(r[a]??0))/2;return{total:n,mean:o,median:_}}function ae(e,t,n,o){return e.filter(r=>{let a=_t(r.date);return a&&a.year===n&&a.month===o&&(r.fixedCategory||r.category||"Uncategorized")===t})}function se(){let[e,t]=P(""),[n,o]=P([]),[r,a]=P(null),[_,c]=P(null),[l,i]=P("amount"),[u,s]=P("desc");Mt(()=>{let f=localStorage.getItem(at),T=f||oe();t(T),f||localStorage.setItem(at,T);let g=Pt(T);o(g);let A=st(g);A[0]!==void 0&&a(A[0])},[]);let p=f=>{let g=f.target.value;t(g),localStorage.setItem(at,g);let A=Pt(g);o(A);let C=st(A);C[0]!==void 0&&(r===null||!C.includes(r))&&a(C[0]),c(null)},d=st(n),b=r!==null?re(n,r):{},x=Object.keys(b).sort(),S=(f,T)=>{r!==null&&c({category:f,month:T,year:r})},h=f=>{l===f?s(u==="asc"?"desc":"asc"):(i(f),s(f==="amount"?"desc":"asc"))},R=[..._?ae(n,_.category,_.year,_.month):[]].sort((f,T)=>{let g=f[l],A=T[l],C=u==="asc"?1:-1;return typeof g=="number"&&typeof A=="number"?(g-A)*C:String(g).localeCompare(String(A))*C});return m("div",{class:"container",children:[m("h1",{children:"Category Spending Insights"}),m("div",{children:[m("label",{children:m("strong",{children:"Paste your TSV data here:"})}),m("textarea",{value:e,onInput:p,placeholder:"Date	Merchant	Category	Account	Original Statement	Notes	Amount	Tags	Owner	FixedCategory"})]}),n.length>0&&m(M,{children:[m("div",{class:"year-selector",children:[m("strong",{children:"Year: "}),d.map(f=>m("button",{class:f===r?"active":"",onClick:()=>{a(f),c(null)},children:f},f))]}),r!==null&&x.length>0&&(()=>{let f={};for(let g of x){let A=b[g]??{};for(let C=1;C<=12;C++)f[C]=(f[C]??0)+(A[C]??0)}let T=Dt(f);return m("table",{class:"pivot-table",children:[m("thead",{children:m("tr",{children:[m("th",{children:"Category"}),z.map(g=>m("th",{children:g},g)),m("th",{children:"Total"}),m("th",{children:"Mean"}),m("th",{children:"Median"})]})}),m("tbody",{children:[x.map(g=>{let A=b[g]??{},C=Dt(A);return m("tr",{children:[m("td",{children:g}),z.map((I,U)=>{let w=U+1,O=A[w]??0,Ft=_?.category===g&&_?.month===w;return m("td",{class:`clickable ${Ft?"selected":""}`,onClick:()=>S(g,w),children:O!==0?H(O):""},w)}),m("td",{children:H(C.total)}),m("td",{children:H(C.mean)}),m("td",{children:H(C.median)})]},g)}),m("tr",{class:"total-row",children:[m("td",{children:m("strong",{children:"Total"})}),z.map((g,A)=>{let C=A+1,I=f[C]??0;return m("td",{children:I!==0?H(I):""},C)}),m("td",{children:m("strong",{children:H(T.total)})}),m("td",{children:m("strong",{children:H(T.mean)})}),m("td",{children:m("strong",{children:H(T.median)})})]})]})]})})(),_&&R.length>0&&m("div",{class:"transactions",children:[m("h3",{children:["Transactions for ",_.category," - ",z[_.month-1]," ",_.year]}),m("table",{children:[m("thead",{children:m("tr",{children:[m("th",{class:"sortable",onClick:()=>h("date"),children:["Date ",l==="date"?u==="asc"?"\u25B2":"\u25BC":""]}),m("th",{class:"sortable",onClick:()=>h("merchant"),children:["Merchant ",l==="merchant"?u==="asc"?"\u25B2":"\u25BC":""]}),m("th",{class:"sortable",onClick:()=>h("category"),children:["Category ",l==="category"?u==="asc"?"\u25B2":"\u25BC":""]}),m("th",{class:"sortable",onClick:()=>h("account"),children:["Account ",l==="account"?u==="asc"?"\u25B2":"\u25BC":""]}),m("th",{class:"sortable",onClick:()=>h("originalStatement"),children:["Original Statement ",l==="originalStatement"?u==="asc"?"\u25B2":"\u25BC":""]}),m("th",{class:"sortable",onClick:()=>h("notes"),children:["Notes ",l==="notes"?u==="asc"?"\u25B2":"\u25BC":""]}),m("th",{class:"sortable",onClick:()=>h("tags"),children:["Tags ",l==="tags"?u==="asc"?"\u25B2":"\u25BC":""]}),m("th",{class:"sortable",onClick:()=>h("owner"),children:["Owner ",l==="owner"?u==="asc"?"\u25B2":"\u25BC":""]}),m("th",{class:"sortable",onClick:()=>h("amount"),children:["Amount ",l==="amount"?u==="asc"?"\u25B2":"\u25BC":""]})]})}),m("tbody",{children:R.map((f,T)=>m("tr",{children:[m("td",{class:"truncate",title:f.date,children:f.date}),m("td",{title:f.merchant,children:f.merchant}),m("td",{class:"truncate",title:f.category,children:f.category}),m("td",{class:"truncate",title:f.account,children:f.account}),m("td",{class:"truncate",title:f.originalStatement,children:f.originalStatement}),m("td",{class:"truncate",title:f.notes,children:f.notes}),m("td",{class:"truncate",title:f.tags,children:f.tags}),m("td",{class:"truncate",title:f.owner,children:f.owner}),m("td",{children:H(f.amount)})]},T))})]})]})]})]})}var Ut=document.getElementById("app");Ut&&Tt(m(se,{}),Ut);})();
//# sourceMappingURL=bundle.js.map
